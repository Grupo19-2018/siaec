<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:composition template="./../../templates/layout/plantilla.xhtml">
        <ui:define name="content">

            <ui:define name="meta-data">
                <f:metadata>
                    <f:viewAction action="#{catalogosBean.verificaAcceso('Gestionar Usuarios')}"/>
                </f:metadata>
            </ui:define>

            <div class="banda1"><b>NUEVO USUARIO</b></div>
            <br/>
            
            <h:form id="form">
            <!-- Panel color blanco -->
            <p:panel style="margin-right: 20pt; margin-left: 20pt; border-radius: 20px; border: solid 1px #D5D5D5">

                <div class="row" style="margin-left: 5px; margin-right: 5px">
                    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                        <h6><b>Seleccione Rol</b></h6>
                        <p:selectOneMenu id="rolnuevo" value="#{catalogosBean.rolSeleccionado}" filter="true" style="width: 100%">
                            <f:selectItem itemLabel="Seleccionar..." itemValue="0" />
                            <f:selectItems value="#{catalogosBean.todosRoles()}" var="rol" 
                                           itemLabel="#{rol.rolNombre}" itemValue="#{rol.rolId}"/>
                            <p:ajax update="crearRol"/>
                        </p:selectOneMenu>
                    </div>
                </div>
                <p:spacer height="10"/>
                <div class="row" style="margin-left: 5px; margin-right: 5px">
                    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                        <h:panelGroup id="crearRol">
                            <h:panelGroup rendered="#{catalogosBean.rolSeleccionado == 1}">
                                Rol 1 
                            </h:panelGroup>
                            <h:panelGroup rendered="#{catalogosBean.rolSeleccionado > 1}">
                                Rol 2
                            </h:panelGroup>
                        </h:panelGroup>
                    </div>
                </div>
            </p:panel>
            </h:form>

            <p:spacer height="50"/>

        </ui:define>

        <!-- Script para funcionalidades de la tabla -->
        <ui:define name="scripts">

            <script>
                $(document).ready(function () {
                    var t = $('#tabla').DataTable({
                        "columnDefs": [{
                                "searchable": false,
                                "orderable": false,
                                "targets": 0
                            }],
                        "order": [[1, 'asc']]
                    });

                    t.on('order.dt search.dt', function () {
                        t.column(0, {search: 'applied', order: 'applied'}).nodes().each(function (cell, i) {
                            cell.innerHTML = i + 1;
                        });
                    }).draw();
                });

                $(document).ready(function () {
                    estiloTabla();
                });

                function estiloTabla() {
                    $('#tabla').dataTable(
                            {
                                "bDestroy": true,
                                "oLanguage": {
                                    "sProcessing": "Procesando...",
                                    "sLengthMenu": "Mostrar _MENU_ registros",
                                    "sZeroRecords": "No se encontraron resultados",
                                    "sEmptyTable": "Ningún dato disponible en esta tabla",
                                    "sInfo": "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
                                    "sInfoEmpty": "Mostrando registros del 0 al 0 de un total de 0 registros",
                                    "sInfoFiltered": "(filtrado de un total de _MAX_ registros)",
                                    "sInfoPostFix": "",
                                    "sSearch": "Buscar:",
                                    "sUrl": "",
                                    "sInfoThousands": ",",
                                    "sLoadingRecords": "Cargando...",
                                    "oPaginate": {
                                        "sFirst": "Primero",
                                        "sLast": "Último",
                                        "sNext": "Siguiente",
                                        "sPrevious": "Anterior"
                                    },
                                    "oAria": {
                                        "sSortAscending": ": Activar para ordenar la columna de manera ascendente",
                                        "sSortDescending": ": Activar para ordenar la columna de manera descendente"
                                    }
                                }
                            }
                    );
                }
            </script>
        </ui:define>
    </ui:composition>
</html>